@page "/"
@page "/{culture}"
@using BlazorLocalizationTest.Resources
@using Microsoft.AspNetCore.Localization
@using Microsoft.Extensions.Localization
@using Utils

@inject IStringLocalizer<ApplicationResource> localizer
@inject IHttpContextAccessor httpContextAccessor

<PageTitle>@localizer[Constants.homePage]</PageTitle>

<h1>@localizer[Constants.homePage]</h1>

@localizer[Constants.homePage]

@code {
    [Parameter]
    public string? culture { get; set; }

    protected override void OnInitialized()
    {
        string? cultureCookie = httpContextAccessor.HttpContext.Request.Cookies[CookieRequestCultureProvider.DefaultCookieName];

        if (cultureCookie == null){
            string cookieName = CookieRequestCultureProvider.DefaultCookieName;
            string cookieValue = CookieRequestCultureProvider.MakeCookieValue(new RequestCulture("en"));
            httpContextAccessor.HttpContext.Response.Cookies.Append(cookieName, cookieValue);
        }

    }
}